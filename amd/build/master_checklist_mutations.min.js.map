{"version":3,"file":"master_checklist_mutations.min.js","sources":["../src/master_checklist_mutations.js"],"sourcesContent":["import Ajax from 'core/ajax';\n\nexport default class {\n    masterChecklistStateEvent(stateManager, data) {\n        const state = stateManager.state;\n        // window.console.log('state master checklist state event');\n        // window.console.log(data);\n        // window.console.log(state);\n    }\n\n    reOrderCategoryItems(stateManager, data) {\n        const state = stateManager.state;\n        window.console.log('reorder category items');\n        window.console.log(data);\n\n        stateManager.setReadOnly(false);\n\n        const category = state.checklistcategories.get(data.targetParentId);\n\n        window.console.log('category items order: ', category.items);\n\n        // Initialize items array if it doesn't exist or isn't iterable\n        if (!category.items || !Array.isArray(category.items)) {\n            category.items = [];\n        }\n\n        const currentItems = [...category.items];\n        const idToMove = data.id;\n        const targetId = data.targetId;\n\n        const currentIndex = currentItems.indexOf(idToMove);\n\n        // If the ID to move is not found in the array, add it at the end\n        if (currentIndex === -1) {\n            currentItems.push(idToMove);\n        }\n\n        // After possible addition, check if target exists\n        const targetIndex = currentItems.indexOf(targetId);\n\n        if (targetIndex !== -1 && currentIndex !== -1) {\n            // Remove the element to move\n            currentItems.splice(currentIndex, 1);\n\n            // Find the new target index (might have shifted if the item was removed before target)\n            const newTargetIndex = currentItems.indexOf(targetId);\n\n            // Insert the element after the target\n            currentItems.splice(newTargetIndex + 1, 0, idToMove);\n        } else if (currentIndex !== -1) {\n            // targetId doesn't exist but idToMove does - keep the current position\n            // No changes needed\n        }\n\n        // Update the items array\n        category.items = currentItems;\n\n        window.console.log('new category items order: ', category.items);\n\n        stateManager.setReadOnly(true);\n\n    }\n\n\n}"],"names":["masterChecklistStateEvent","stateManager","data","state","reOrderCategoryItems","window","console","log","setReadOnly","category","checklistcategories","get","targetParentId","items","Array","isArray","currentItems","idToMove","id","targetId","currentIndex","indexOf","push","splice","newTargetIndex"],"mappings":"2QAGIA,0BAA0BC,aAAcC,MACtBD,aAAaE,MAM/BC,qBAAqBH,aAAcC,YACzBC,MAAQF,aAAaE,MAC3BE,OAAOC,QAAQC,IAAI,0BACnBF,OAAOC,QAAQC,IAAIL,MAEnBD,aAAaO,aAAY,SAEnBC,SAAWN,MAAMO,oBAAoBC,IAAIT,KAAKU,gBAEpDP,OAAOC,QAAQC,IAAI,yBAA0BE,SAASI,OAGjDJ,SAASI,OAAUC,MAAMC,QAAQN,SAASI,SAC3CJ,SAASI,MAAQ,UAGfG,aAAe,IAAIP,SAASI,OAC5BI,SAAWf,KAAKgB,GAChBC,SAAWjB,KAAKiB,SAEhBC,aAAeJ,aAAaK,QAAQJ,WAGpB,IAAlBG,cACAJ,aAAaM,KAAKL,cAMD,IAFDD,aAAaK,QAAQF,YAEG,IAAlBC,aAAqB,CAE3CJ,aAAaO,OAAOH,aAAc,SAG5BI,eAAiBR,aAAaK,QAAQF,UAG5CH,aAAaO,OAAOC,eAAiB,EAAG,EAAGP,UAO/CR,SAASI,MAAQG,aAEjBX,OAAOC,QAAQC,IAAI,6BAA8BE,SAASI,OAE1DZ,aAAaO,aAAY"}