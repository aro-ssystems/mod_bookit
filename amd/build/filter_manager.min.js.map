{"version":3,"file":"filter_manager.min.js","sources":["../src/filter_manager.js"],"sourcesContent":["/**\n * Filter Manager for the calendar view\n */\nexport class FilterManager {\n    constructor() {\n        this.filters = {};\n    }\n\n    /**\n     * Initialize the Filter Manager\n     */\n    init() {\n        document.addEventListener('filterupdate', (event) => {\n            this.filters = {\n                ...event.detail,\n                // Add start/end date if they exist\n                start: this.filters.start || null,\n                end: this.filters.end || null\n            };\n\n            // Dispatch filterchange event\n            const filterChangeEvent = new Event('filterchange');\n            document.dispatchEvent(filterChangeEvent);\n        });\n    }\n\n    /**\n     * Check if an event matches the filter criteria\n     * @param {Object} event - The event object\n     * @returns {boolean}\n     */\n    checkEventVisibility(event) {\n        // Extract event data\n        const eventData = {\n            title: event.title || '',\n            room: event.room || '',  // Directly from event object\n            faculty: event.department || '',  // Use department instead of faculty\n            status: event.status || '',  // Directly from event object\n            startTime: event.start ? new Date(event.start) : null\n        };\n\n        // Check text search\n        if (this.filters.search) {\n            const searchTerm = this.filters.search.toLowerCase();\n            const searchableText = [\n                eventData.title,\n                eventData.room,\n                eventData.faculty\n            ].join(' ').toLowerCase();\n\n            if (!searchableText.includes(searchTerm)) {\n                return false;\n            }\n        }\n\n        // Check room filter\n        if (this.filters.room && eventData.room !== this.filters.room) {\n            return false;\n        }\n\n        // Check timeslot filter\n        if (this.filters.timeslot && eventData.startTime) {\n            const eventHour = eventData.startTime.getHours();\n            const isVisible = this.checkTimeSlot(eventHour, this.filters.timeslot);\n            if (!isVisible) {\n                return false;\n            }\n        }\n\n        // Check faculty filter\n        if (this.filters.faculty && eventData.faculty !== this.filters.faculty) {\n            return false;\n        }\n\n        // Check status filter\n        if (this.filters.status && eventData.status !== this.filters.status) {\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Check if a time falls within a timeslot\n     * @param {number} hour - The hour (0-23)\n     * @param {string} timeslot - The timeslot (morning|afternoon|evening)\n     * @returns {boolean}\n     */\n    checkTimeSlot(hour, timeslot) {\n        switch (timeslot) {\n            case 'morning':\n                return hour >= 7 && hour < 12;\n            case 'afternoon':\n                return hour >= 12 && hour < 17;\n            case 'evening':\n                return hour >= 17 && hour < 22;\n            default:\n                return true;\n        }\n    }\n}"],"names":["constructor","filters","init","document","addEventListener","event","detail","start","this","end","filterChangeEvent","Event","dispatchEvent","checkEventVisibility","eventData","title","room","faculty","department","status","startTime","Date","search","searchTerm","toLowerCase","join","includes","timeslot","eventHour","getHours","checkTimeSlot","hour"],"mappings":"sLAIIA,mBACSC,QAAU,GAMnBC,OACIC,SAASC,iBAAiB,gBAAiBC,aAClCJ,QAAU,IACRI,MAAMC,OAETC,MAAOC,KAAKP,QAAQM,OAAS,KAC7BE,IAAKD,KAAKP,QAAQQ,KAAO,YAIvBC,kBAAoB,IAAIC,MAAM,gBACpCR,SAASS,cAAcF,sBAS/BG,qBAAqBR,aAEXS,UAAY,CACdC,MAAOV,MAAMU,OAAS,GACtBC,KAAMX,MAAMW,MAAQ,GACpBC,QAASZ,MAAMa,YAAc,GAC7BC,OAAQd,MAAMc,QAAU,GACxBC,UAAWf,MAAME,MAAQ,IAAIc,KAAKhB,MAAME,OAAS,SAIjDC,KAAKP,QAAQqB,OAAQ,OACfC,WAAaf,KAAKP,QAAQqB,OAAOE,kBAChB,CACnBV,UAAUC,MACVD,UAAUE,KACVF,UAAUG,SACZQ,KAAK,KAAKD,cAEQE,SAASH,mBAClB,KAKXf,KAAKP,QAAQe,MAAQF,UAAUE,OAASR,KAAKP,QAAQe,YAC9C,KAIPR,KAAKP,QAAQ0B,UAAYb,UAAUM,UAAW,OACxCQ,UAAYd,UAAUM,UAAUS,eACpBrB,KAAKsB,cAAcF,UAAWpB,KAAKP,QAAQ0B,iBAElD,UAKXnB,KAAKP,QAAQgB,SAAWH,UAAUG,UAAYT,KAAKP,QAAQgB,YAK3DT,KAAKP,QAAQkB,QAAUL,UAAUK,SAAWX,KAAKP,QAAQkB,QAajEW,cAAcC,KAAMJ,iBACRA,cACC,iBACMI,MAAQ,GAAKA,KAAO,OAC1B,mBACMA,MAAQ,IAAMA,KAAO,OAC3B,iBACMA,MAAQ,IAAMA,KAAO,kBAErB"}