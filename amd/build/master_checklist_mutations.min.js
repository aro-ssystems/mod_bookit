define("mod_bookit/master_checklist_mutations",["exports","core/ajax"],(function(_exports,_ajax){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_ajax=(obj=_ajax)&&obj.__esModule?obj:{default:obj};return _exports.default=class{masterChecklistStateEvent(stateManager,data){stateManager.state}reOrderCategoryItems(stateManager,data){const state=stateManager.state;if(window.console.log("reorder category items"),window.console.log(data),stateManager.setReadOnly(!1),data.parentId!==data.targetParentId){const sourceCategory=state.checklistcategories.get(data.parentId),targetCategory=state.checklistcategories.get(data.targetParentId);sourceCategory.items&&Array.isArray(sourceCategory.items)||(sourceCategory.items=[]),targetCategory.items&&Array.isArray(targetCategory.items)||(targetCategory.items=[]);const idToMove=parseInt(data.id),targetId=parseInt(data.targetId);sourceCategory.items=sourceCategory.items.filter((item=>item!==idToMove));const targetItems=[...targetCategory.items];if(-1===targetItems.indexOf(idToMove)){const targetIndex=targetItems.indexOf(targetId);-1!==targetIndex?targetItems.splice(targetIndex+1,0,idToMove):targetItems.push(idToMove)}targetCategory.items=targetItems;state.checklistitems.get(idToMove).category=targetCategory.id,window.console.log("New source category items:",sourceCategory.items),window.console.log("New target category items:",targetCategory.items)}else{const category=state.checklistcategories.get(data.targetParentId);window.console.log("category items order: ",category.items),category.items&&Array.isArray(category.items)||(category.items=[]);const currentItems=[...category.items],idToMove=parseInt(data.id),targetId=parseInt(data.targetId),currentIndex=currentItems.indexOf(idToMove);-1===currentIndex&&currentItems.push(idToMove);if(-1!==currentItems.indexOf(targetId)&&-1!==currentIndex){currentItems.splice(currentIndex,1);const newTargetIndex=currentItems.indexOf(targetId);currentItems.splice(newTargetIndex+1,0,idToMove)}category.items=currentItems,window.console.log("new category items order: ",category.items)}stateManager.setReadOnly(!0)}checklistitemCreated(stateManager,data){const state=stateManager.state;window.console.log("checklist item created"),window.console.log(data),window.console.log(data[0]),window.console.log(data[0].fields),window.console.log(data[0].fields.category),stateManager.processUpdates(data),stateManager.setReadOnly(!1);const category=state.checklistcategories.get(data[0].fields.category),currentItems=[...category.items];currentItems.push(data[0].fields.id),category.items=currentItems,stateManager.setReadOnly(!0)}},_exports.default}));

//# sourceMappingURL=master_checklist_mutations.min.js.map