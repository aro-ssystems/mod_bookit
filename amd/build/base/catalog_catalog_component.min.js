define("mod_bookit/base/catalog_catalog_component",["exports","core_form/modalform","core/str"],(function(_exports,_modalform,_str){var obj;
/**
   * Base component for catalog container.
   *
   * @module mod_bookit/base/catalog_catalog_component
   * @copyright   2026 ssystems GmbH <oss@ssystems.de>
   * @author      Andreas Rosenthal
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_modalform=(obj=_modalform)&&obj.__esModule?obj:{default:obj};return _exports.default=class{constructor(reactive,CategoryComponentClass){this.reactive=reactive,this.CategoryComponentClass=CategoryComponentClass,this.containerElement=null,this.categoriesContainer=null,this.categoryComponents=new Map}async init(containerId){this.containerElement=document.getElementById(containerId),this.containerElement?(this.categoriesContainer=this.containerElement.querySelector("#mod-bookit-resource-categories"),this.categoriesContainer?(await this.registerWatchers(),await this.renderCategories(),this.attachEventListeners(),this.hideSpinner(),this.showContent()):window.console.error("Categories container not found")):window.console.error("Catalog container not found:",containerId)}async registerWatchers(){return this.reactive.stateReady.then((()=>{const state=this.reactive.state;return state.categories&&this.reactive.watch((()=>state.categories),(()=>{this.renderCategories()})),state.items&&this.reactive.watch((()=>state.items),(()=>{this.renderCategories()})),!0})).catch((error=>{throw window.console.error("Error registering watchers:",error),error}))}async renderCategories(){if(!this.categoriesContainer)return;const state=this.reactive.state,categories=Array.from(state.categories.values()).sort(((a,b)=>a.sortorder-b.sortorder));if(this.categoriesContainer.innerHTML="",this.categoryComponents.clear(),0!==categories.length){this.hideNoCategoriesMessage();for(const categoryData of categories){const categoryComponent=new this.CategoryComponentClass(this.reactive,categoryData,this.getItemComponentClass()),categoryElement=await categoryComponent.render();this.categoriesContainer.appendChild(categoryElement),this.categoryComponents.set(categoryData.id,categoryComponent)}}else this.showNoCategoriesMessage()}getItemComponentClass(){throw new Error("getItemComponentClass() must be implemented by subclass")}getAddCategoryModalFormClass(){throw new Error("getAddCategoryModalFormClass() must be implemented by subclass")}attachEventListeners(){const addCategoryBtn=document.getElementById("add-category-btn");addCategoryBtn&&addCategoryBtn.addEventListener("click",(e=>{e.preventDefault(),this.handleAddCategory()}))}async handleAddCategory(){const modalForm=new _modalform.default({formClass:this.getAddCategoryModalFormClass(),args:{id:0},modalConfig:{title:await this.getAddCategoryModalTitle()}});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(e=>{this.reactive.dispatch("createCategory",e.detail)})),modalForm.show()}async getAddCategoryModalTitle(){return(0,_str.get_string)("resources:add_category","mod_bookit")}hideSpinner(){const spinner=document.getElementById("mod-bookit-resource-spinner");spinner&&spinner.classList.add("d-none")}showContent(){const content=document.getElementById("mod-bookit-resource-content");content&&content.classList.remove("d-none")}showNoCategoriesMessage(){const msg=document.getElementById("mod-bookit-no-categories");msg&&msg.classList.remove("d-none")}hideNoCategoriesMessage(){const msg=document.getElementById("mod-bookit-no-categories");msg&&msg.classList.add("d-none")}},_exports.default}));

//# sourceMappingURL=catalog_catalog_component.min.js.map