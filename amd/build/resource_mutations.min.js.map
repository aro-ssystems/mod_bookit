{"version":3,"file":"resource_mutations.min.js","sources":["../src/resource_mutations.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Mutations for resource catalog reactive state.\n *\n * @module mod_bookit/resource_mutations\n * @copyright   2026 ssystems GmbH <oss@ssystems.de>\n * @author      Andreas Rosenthal\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nexport default class {\n    /**\n     * Placeholder method for resource catalog state events.\n     */\n    resourceCatalogStateEvent() {\n        // This method is intentionally empty - it's a placeholder for state events.\n    }\n\n    /**\n     * Handle category deletion.\n     *\n     * @param {Object} stateManager - The reactive state manager\n     * @param {number} categoryId - The ID of the category to delete\n     */\n    deleteCategory(stateManager, categoryId) {\n        const state = stateManager.state;\n\n        stateManager.setReadOnly(false);\n\n        // Delete all items in this category first\n        const itemsToDelete = [];\n        state.items.forEach((item, id) => {\n            if (item.categoryid === categoryId) {\n                itemsToDelete.push(id);\n            }\n        });\n        itemsToDelete.forEach(id => state.items.delete(id));\n\n        // Delete the category\n        state.categories.delete(categoryId);\n\n        stateManager.setReadOnly(true);\n    }\n\n    /**\n     * Handle item deletion.\n     *\n     * @param {Object} stateManager - The reactive state manager\n     * @param {number} itemId - The ID of the item to delete\n     */\n    deleteItem(stateManager, itemId) {\n        const state = stateManager.state;\n\n        stateManager.setReadOnly(false);\n\n        state.items.delete(itemId);\n\n        stateManager.setReadOnly(true);\n    }\n}\n"],"names":["resourceCatalogStateEvent","deleteCategory","stateManager","categoryId","state","setReadOnly","itemsToDelete","items","forEach","item","id","categoryid","push","delete","categories","deleteItem","itemId"],"mappings":";;;;;;;;;MA4BIA,6BAUAC,eAAeC,aAAcC,kBACnBC,MAAQF,aAAaE,MAE3BF,aAAaG,aAAY,SAGnBC,cAAgB,GACtBF,MAAMG,MAAMC,SAAQ,CAACC,KAAMC,MACnBD,KAAKE,aAAeR,YACpBG,cAAcM,KAAKF,OAG3BJ,cAAcE,SAAQE,IAAMN,MAAMG,MAAMM,OAAOH,MAG/CN,MAAMU,WAAWD,OAAOV,YAExBD,aAAaG,aAAY,GAS7BU,WAAWb,aAAcc,cACfZ,MAAQF,aAAaE,MAE3BF,aAAaG,aAAY,GAEzBD,MAAMG,MAAMM,OAAOG,QAEnBd,aAAaG,aAAY"}