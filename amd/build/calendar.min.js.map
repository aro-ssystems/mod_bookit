{"version":3,"file":"calendar.min.js","sources":["../src/calendar.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Implements reviewing functionality\n *\n * @module     mod_moodleoverflow/reviewing\n * @copyright  2022 Justus Dieckmann WWU\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport {get_string as getString} from 'core/str';\nimport Prefetch from 'core/prefetch';\n\nconst theGlobalProperty = (globalPropertyName) => {\n    return new Promise((resolve) => {\n       const innerWait = () => {\n           if (!window[globalPropertyName]) {\n               setTimeout(innerWait, 20);\n           }\n           resolve();\n       };\n       innerWait();\n    });\n};\n\n/**\n * Initializes the calendar.\n * @param {string} entryform\n * @param {string} eventsource\n * @returns {Promise<void>}\n */\nexport async function init(entryform, eventsource) {\n    Prefetch.prefetchString('mod_bookit', 'addbooking');\n    await theGlobalProperty('EventCalendar');\n    const str_request_booking = await getString('addbooking', 'mod_bookit');\n\n    let viewType = 'timeGridWeek';\n    if (window.screen.width <= 1000) {\n        viewType = 'listWeek';\n    }\n\n    new window.EventCalendar(document.getElementById('ec'), {\n        view: viewType,\n        firstDay: 1,\n        customButtons: {\n            addButton: {\n                text: str_request_booking,\n                click: function() {\n                    window.location.replace(entryform);\n                }\n            }\n        },\n        headerToolbar: {\n            start: 'prev,next today, addButton',\n            center: 'title',\n            end: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek resourceTimeGridWeek,resourceTimelineWeek'\n        },\n        resources: [],\n        eventSources: [\n            {\n                url: eventsource,\n            },\n        ],\n        scrollTime: '09:00:00',\n        slotMinTime: '07:00:00',\n        views: {\n            timeGridWeek: {pointer: true},\n            resourceTimeGridWeek: {pointer: true},\n            resourceTimelineWeek: {\n                pointer: true,\n                slotMinTime: '09:00',\n                slotMaxTime: '21:00',\n                slotWidth: 80,\n                resources: []\n            }\n        },\n        dayMaxEvents: true,\n        nowIndicator: true,\n        selectable: true,\n        eventStartEditable: false\n    });\n}\n"],"names":["entryform","eventsource","prefetchString","globalPropertyName","Promise","resolve","innerWait","window","setTimeout","str_request_booking","viewType","screen","width","EventCalendar","document","getElementById","view","firstDay","customButtons","addButton","text","click","location","replace","headerToolbar","start","center","end","resources","eventSources","url","scrollTime","slotMinTime","views","timeGridWeek","pointer","resourceTimeGridWeek","resourceTimelineWeek","slotMaxTime","slotWidth","dayMaxEvents","nowIndicator","selectable","eventStartEditable"],"mappings":";;;;;;;0FA2C2BA,UAAWC,+BACzBC,eAAe,aAAc,oBAnBfC,mBAoBC,gBAnBjB,IAAIC,SAASC,gBACXC,UAAY,KACTC,OAAOJ,qBACRK,WAAWF,UAAW,IAE1BD,WAEJC,gBARoBH,IAAAA,yBAqBjBM,0BAA4B,mBAAU,aAAc,kBAEtDC,SAAW,eACXH,OAAOI,OAAOC,OAAS,MACvBF,SAAW,gBAGXH,OAAOM,cAAcC,SAASC,eAAe,MAAO,CACpDC,KAAMN,SACNO,SAAU,EACVC,cAAe,CACXC,UAAW,CACPC,KAAMX,oBACNY,MAAO,WACHd,OAAOe,SAASC,QAAQvB,cAIpCwB,cAAe,CACXC,MAAO,6BACPC,OAAQ,QACRC,IAAK,4FAETC,UAAW,GACXC,aAAc,CACV,CACIC,IAAK7B,cAGb8B,WAAY,WACZC,YAAa,WACbC,MAAO,CACHC,aAAc,CAACC,SAAS,GACxBC,qBAAsB,CAACD,SAAS,GAChCE,qBAAsB,CAClBF,SAAS,EACTH,YAAa,QACbM,YAAa,QACbC,UAAW,GACXX,UAAW,KAGnBY,cAAc,EACdC,cAAc,EACdC,YAAY,EACZC,oBAAoB"}