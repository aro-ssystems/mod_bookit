define("mod_bookit/resource_reactive",["exports","core/reactive"],(function(_exports,_reactive){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.resourceReactiveInstance=_exports.initResourceReactive=void 0;
/**
   * Reactive store for resource catalog.
   *
   * @module mod_bookit/resource_reactive
   * @copyright   2026 ssystems GmbH <oss@ssystems.de>
   * @author      Andreas Rosenthal
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
const EVENTNAME="mod_bookit:resource_catalog_state_event";let resourceReactiveInstance=null;_exports.resourceReactiveInstance=resourceReactiveInstance;function dispatchResourceStateEvent(detail,target){void 0===target&&(target=document),target.dispatchEvent(new CustomEvent(EVENTNAME,{bubbles:!0,detail:detail}))}_exports.initResourceReactive=initialState=>{if(null===resourceReactiveInstance){_exports.resourceReactiveInstance=resourceReactiveInstance=new _reactive.Reactive({name:"Moodle Bookit Resource Catalog",eventName:EVENTNAME,eventDispatch:dispatchResourceStateEvent,mutations:{createCategory:(state,category)=>{const newCategory=(0,_reactive.stateMap)({id:category.id,name:category.name,description:category.description||"",sortorder:category.sortorder||state.categories.size});state.categories.set(category.id,newCategory)},updateCategory:(state,category)=>{if(state.categories.has(category.id)){const updatedCategory=(0,_reactive.stateMap)({id:category.id,name:category.name,description:category.description||"",sortorder:category.sortorder});state.categories.set(category.id,updatedCategory)}},deleteCategory:(state,categoryId)=>{const itemsToDelete=[];state.items.forEach(((item,id)=>{item.categoryid===categoryId&&itemsToDelete.push(id)})),itemsToDelete.forEach((id=>state.items.delete(id))),state.categories.delete(categoryId)},createItem:(state,item)=>{const newItem=(0,_reactive.stateMap)({id:item.id,name:item.name,description:item.description||"",categoryid:item.categoryid,amount:item.amount||1,amountirrelevant:item.amountirrelevant||!1,sortorder:item.sortorder||0});state.items.set(item.id,newItem)},updateItem:(state,item)=>{if(state.items.has(item.id)){const updatedItem=(0,_reactive.stateMap)({id:item.id,name:item.name,description:item.description||"",categoryid:item.categoryid,amount:item.amount||1,amountirrelevant:item.amountirrelevant||!1,sortorder:item.sortorder});state.items.set(item.id,updatedItem)}},deleteItem:(state,itemId)=>{state.items.delete(itemId)}}});const categoriesMap=new Map(initialState.categories.map((cat=>[cat.id,(0,_reactive.stateMap)(cat)]))),itemsMap=new Map(initialState.items.map((item=>[item.id,(0,_reactive.stateMap)(item)])));resourceReactiveInstance.setInitialState({categories:categoriesMap,items:itemsMap})}return resourceReactiveInstance}}));

//# sourceMappingURL=resource_reactive.min.js.map