define("mod_bookit/checklist/checklist_helper",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.sortBySortorder=_exports.parseDatasetJson=_exports.initializeFromDOM=_exports.groupItemsByCategory=_exports.getNestedProperty=_exports.formatDateTime=_exports.formatDate=_exports.filterItemsByCategory=_exports.extractItemData=_exports.extractCategoryData=_exports.debounce=void 0;_exports.parseDatasetJson=function(jsonString){let defaultValue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!jsonString)return defaultValue;try{const parsed=JSON.parse(jsonString);return Array.isArray(defaultValue)&&!Array.isArray(parsed)?defaultValue:parsed}catch(e){return window.console.warn("Failed to parse JSON:",e,jsonString),defaultValue}};const extractCategoryData=element=>{const categoryRow=element.querySelector('[data-region="checklist-category-row"]');return{id:parseInt(element.dataset.categoryid),name:element.dataset.categoryName||(null==categoryRow?void 0:categoryRow.textContent.trim())||"",description:element.dataset.categoryDescription||"",sortorder:parseInt(element.dataset.categorySortorder)||0}};_exports.extractCategoryData=extractCategoryData;const extractItemData=function(element){let additionalFields=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const baseData={id:parseInt(element.dataset.itemid||element.dataset.bookitItemId),name:element.dataset.itemName||"",description:element.dataset.itemDescription||"",categoryid:parseInt(element.dataset.itemCategoryid||element.dataset.categoryid),sortorder:parseInt(element.dataset.itemSortorder)||0};return Object.keys(additionalFields).forEach((key=>{const extractor=additionalFields[key];"function"==typeof extractor?baseData[key]=extractor(element):"string"==typeof extractor&&(baseData[key]=element.dataset[extractor])})),baseData};_exports.extractItemData=extractItemData;_exports.initializeFromDOM=(containerElement,config)=>{const categoriesArray=[],itemsArray=[];return containerElement.querySelectorAll('[data-region="'.concat(config.categoryRegion||"checklist-category",'"]')).forEach((categoryEl=>{const categoryData=extractCategoryData(categoryEl);categoriesArray.push(categoryData);categoryEl.querySelectorAll('[data-region="'.concat(config.itemRegion||"checklist-item-row",'"]')).forEach((itemEl=>{const itemData=extractItemData(itemEl,config.itemFields||{});itemsArray.push(itemData)}))})),{categories:categoriesArray,items:itemsArray}};_exports.debounce=(func,wait)=>{let timeout;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];const later=()=>{clearTimeout(timeout),func(...args)};clearTimeout(timeout),timeout=setTimeout(later,wait)}};_exports.getNestedProperty=function(obj,path){let defaultValue=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const keys=path.split(".");let result=obj;for(const key of keys){if(null==result)return defaultValue;result=result[key]}return void 0!==result?result:defaultValue};_exports.formatDate=function(timestamp){let locale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if(!timestamp)return"";const date=new Date(1e3*timestamp);return date.toLocaleDateString(locale)};_exports.formatDateTime=function(timestamp){let locale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if(!timestamp)return"";const date=new Date(1e3*timestamp);return date.toLocaleString(locale)};_exports.sortBySortorder=array=>array.sort(((a,b)=>(a.sortorder||0)-(b.sortorder||0)));_exports.filterItemsByCategory=(items,categoryId)=>items.filter((item=>item.categoryid===categoryId));_exports.groupItemsByCategory=items=>{const groups=new Map;return items.forEach((item=>{groups.has(item.categoryid)||groups.set(item.categoryid,[]),groups.get(item.categoryid).push(item)})),groups}}));

//# sourceMappingURL=checklist_helper.min.js.map