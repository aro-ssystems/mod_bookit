define("mod_bookit/resource_item",["exports","core/reactive","core/templates","core_form/modalform","core/str","core/notification"],(function(_exports,_reactive,_templates,_modalform,_str,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Resource item reactive component.
   *
   * @module mod_bookit/resource_item
   * @copyright   2026 ssystems GmbH <oss@ssystems.de>
   * @author      Andreas Rosenthal
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_templates=_interopRequireDefault(_templates),_modalform=_interopRequireDefault(_modalform),_notification=_interopRequireDefault(_notification);class ResourceItem extends _reactive.BaseComponent{static get componentName(){return"mod_bookit/resource_item"}create(_ref){let{element:element,itemData:itemData}=_ref;this.itemData=itemData,this.itemElement=null,this.parentElement=element,this._render()}getWatchers(){return[]}async _render(){const html=await _templates.default.render("mod_bookit/resource_item_row",this.itemData),wrapper=document.createElement("tbody");wrapper.innerHTML=html.trim(),this.itemElement=wrapper.firstChild,this.parentElement.appendChild(this.itemElement),this._attachEventListeners()}_attachEventListeners(){if(!this.itemElement)return;const editBtn=this.itemElement.querySelector('[data-action="edit-item"]');editBtn&&editBtn.addEventListener("click",(e=>{e.preventDefault(),this._handleEdit()}))}async _handleEdit(){const modalForm=new _modalform.default({formClass:"mod_bookit\\form\\edit_resource_form",moduleName:"mod_bookit/modal_delete_save_cancel",args:{id:this.itemData.id},modalConfig:{title:await(0,_str.get_string)("resources:edit_resource","mod_bookit")}});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(e=>{this.reactive.stateManager.processUpdates(e.detail)})),modalForm.addEventListener(modalForm.events.LOADED,(()=>{modalForm.modal.getRoot().find('button[data-action="delete"]').on("click",(async e=>{e.preventDefault();const confirmTitle=await(0,_str.get_string)("confirm","core"),confirmMessage=await(0,_str.get_string)("areyousure","core"),deleteText=await(0,_str.get_string)("delete","core");_notification.default.deleteCancel(confirmTitle,confirmMessage,deleteText,(()=>{modalForm.getFormNode().querySelector('input[name="action"]').value="delete",modalForm.submitFormAjax()}))}))})),modalForm.show()}update(newData){this.itemData=newData,_templates.default.render("mod_bookit/resource_item_row",newData).then((html=>{const wrapper=document.createElement("tbody");wrapper.innerHTML=html.trim();const newRow=wrapper.firstChild;return this.itemElement&&this.itemElement.parentNode&&(this.itemElement.parentNode.replaceChild(newRow,this.itemElement),this.itemElement=newRow,this._attachEventListeners()),!0})).catch((error=>{window.console.error("Error updating resource item:",error)}))}remove(){this.itemElement&&this.itemElement.parentNode&&this.itemElement.parentNode.removeChild(this.itemElement)}}return _exports.default=ResourceItem,_exports.default}));

//# sourceMappingURL=resource_item.min.js.map