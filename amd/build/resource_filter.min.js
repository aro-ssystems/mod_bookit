define("mod_bookit/resource_filter",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=_exports.default=void 0;
/**
   * Resource filter component for multi-select button groups.
   *
   * @module mod_bookit/resource_filter
   * @copyright   2026 ssystems GmbH <oss@ssystems.de>
   * @author      Andreas Rosenthal
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
class ResourceFilter{constructor(selector){this.container=document.querySelector(selector),this.container&&(this.selectedRooms=new Set,this.initEventListeners())}initEventListeners(){const filterGroup=this.container.querySelector('[data-filter="room"]');filterGroup&&filterGroup.addEventListener("click",(e=>{if(!e.target.matches("button"))return;const button=e.target;"clear"===button.dataset.action?this.clearSelection(filterGroup):this.toggleButton(button),this.applyFilter()}))}toggleButton(button){const value=button.dataset.value;"true"===button.getAttribute("aria-pressed")?(button.classList.remove("btn-primary"),button.classList.add("btn-outline-primary"),button.setAttribute("aria-pressed","false"),this.selectedRooms.delete(value)):(button.classList.remove("btn-outline-primary"),button.classList.add("btn-primary"),button.setAttribute("aria-pressed","true"),this.selectedRooms.add(value))}clearSelection(filterGroup){filterGroup.querySelectorAll("[data-value]").forEach((button=>{button.classList.remove("btn-primary"),button.classList.add("btn-outline-primary"),button.setAttribute("aria-pressed","false")})),this.selectedRooms.clear()}applyFilter(){const allCategories=document.querySelectorAll('[data-region="resource-category"]');0!==this.selectedRooms.size?allCategories.forEach((category=>{const resourceRows=category.querySelectorAll('[data-region="resource-row"]');let hasVisibleResources=!1;resourceRows.forEach((row=>{const resourceRooms=this.getResourceRooms(row);this.hasMatchingRoom(resourceRooms)?(row.style.display="",hasVisibleResources=!0):row.style.display="none"})),hasVisibleResources||0===resourceRows.length?category.style.display="":category.style.display="none"})):allCategories.forEach((category=>{category.style.display=""}))}getResourceRooms(row){const roomsData=row.dataset.rooms;if(!roomsData)return[];try{return JSON.parse(roomsData)}catch(e){return[]}}hasMatchingRoom(resourceRooms){return 0===resourceRooms.length||resourceRooms.some((roomId=>this.selectedRooms.has(String(roomId))))}}_exports.default=ResourceFilter;return _exports.init=selector=>new ResourceFilter(selector),_exports.default}));

//# sourceMappingURL=resource_filter.min.js.map