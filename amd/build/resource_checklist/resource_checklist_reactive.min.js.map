{"version":3,"file":"resource_checklist_reactive.min.js","sources":["../../src/resource_checklist/resource_checklist_reactive.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Reactive store for resource checklist.\n *\n * @module mod_bookit/resource_checklist/resource_checklist_reactive\n * @copyright   2026 ssystems GmbH <oss@ssystems.de>\n * @author      Andreas Rosenthal\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {Reactive} from 'core/reactive';\nimport ResourceChecklistMutations from 'mod_bookit/resource_checklist/resource_checklist_mutations';\n\nexport const SELECTORS = {\n    TABLE: '#resource-checklist-table',\n    ALL_CATEGORY_ROWS: 'tbody[data-bookit-category-id]',\n    ALL_ITEM_ROWS: 'tr[data-bookit-item-id]',\n};\n\nconst EVENTNAME = 'mod_bookit:resource_checklist_state_event';\n\nlet resourceChecklistReactiveInstance = null;\n\n/**\n * Initialize resource checklist reactive store.\n *\n * @param {Object} initialState - Initial state with categories and checklistitems\n * @param {Array} initialState.categories - Array of category data\n * @param {Array} initialState.checklistitems - Array of checklist item data\n * @return {Reactive} Reactive instance\n */\nexport const initResourceChecklistReactive = (initialState) => {\n    if (resourceChecklistReactiveInstance === null) {\n        resourceChecklistReactiveInstance = new Reactive({\n            name: 'Moodle Bookit Resource Checklist',\n            eventName: EVENTNAME,\n            eventDispatch: dispatchResourceChecklistStateEvent,\n            mutations: new ResourceChecklistMutations(),\n        });\n\n        // Set initial state - Moodle automatically converts arrays to Maps.\n        resourceChecklistReactiveInstance.setInitialState({\n            categories: initialState.categories || [],\n            checklistitems: initialState.checklistitems || [],\n        });\n    }\n\n    return resourceChecklistReactiveInstance;\n};\n\n/**\n * Dispatch the resource checklist state event.\n *\n * @param {Object} detail - The event detail\n * @param {HTMLElement} target - The target element\n */\nfunction dispatchResourceChecklistStateEvent(detail, target) {\n    if (target === undefined) {\n        target = document;\n    }\n    target.dispatchEvent(\n        new CustomEvent(\n            EVENTNAME,\n            {\n                bubbles: true,\n                detail: detail,\n            }\n        )\n    );\n}\n\nexport {resourceChecklistReactiveInstance};\n"],"names":["TABLE","ALL_CATEGORY_ROWS","ALL_ITEM_ROWS","EVENTNAME","resourceChecklistReactiveInstance","dispatchResourceChecklistStateEvent","detail","target","undefined","document","dispatchEvent","CustomEvent","bubbles","initialState","Reactive","name","eventName","eventDispatch","mutations","ResourceChecklistMutations","setInitialState","categories","checklistitems"],"mappings":";;;;;;;;gSA2ByB,CACrBA,MAAO,4BACPC,kBAAmB,iCACnBC,cAAe,iCAGbC,UAAY,gDAEdC,kCAAoC,2FAmC/BC,oCAAoCC,OAAQC,aAClCC,IAAXD,SACAA,OAASE,UAEbF,OAAOG,cACH,IAAIC,YACAR,UACA,CACIS,SAAS,EACTN,OAAQA,iDAlCsBO,eACA,OAAtCT,+EACAA,kCAAoC,IAAIU,mBAAS,CAC7CC,KAAM,mCACNC,UAAWb,UACXc,cAAeZ,oCACfa,UAAW,IAAIC,wCAInBf,kCAAkCgB,gBAAgB,CAC9CC,WAAYR,aAAaQ,YAAc,GACvCC,eAAgBT,aAAaS,gBAAkB,MAIhDlB"}