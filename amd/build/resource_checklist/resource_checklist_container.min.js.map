{"version":3,"file":"resource_checklist_container.min.js","sources":["../../src/resource_checklist/resource_checklist_container.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Resource checklist container component.\n *\n * @module mod_bookit/resource_checklist/resource_checklist_container\n * @copyright   2026 ssystems GmbH <oss@ssystems.de>\n * @author      Andreas Rosenthal\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport BaseChecklistContainer from 'mod_bookit/checklist/base_checklist_container';\nimport {resourceChecklistReactiveInstance, initResourceChecklistReactive} from './resource_checklist_reactive';\nimport {initializeFromDOM} from 'mod_bookit/checklist/checklist_helper';\nimport ResourceChecklistCategory from './resource_checklist_category';\n\n/**\n * Resource checklist container component.\n */\nexport default class extends BaseChecklistContainer {\n    /**\n     * Static init method.\n     *\n     * @param {string} target - CSS selector for container element\n     * @return {Object} Component instance\n     */\n    static init(target) {\n        const element = document.querySelector(target);\n        if (!element) {\n            return null;\n        }\n\n        const contextId = parseInt(element.dataset.contextid);\n\n        // Initialize from DOM\n        const data = initializeFromDOM(element, {\n            categoryRegion: 'resource-checklist-category',\n            itemRegion: 'resource-checklist-item-row',\n            itemFields: {\n                resourceid: 'itemResourceid',\n                duedate: (el) => el.dataset.itemDuedate ? parseInt(el.dataset.itemDuedate) : null,\n                duedatetype: 'itemDuedatetype',\n                active: (el) => el.dataset.itemActive === '1',\n            }\n        });\n\n        initResourceChecklistReactive({\n            categories: data.categories,\n            checklistitems: data.items,\n        });\n\n        return new this({\n            element: element,\n            reactive: resourceChecklistReactiveInstance,\n            selectors: {contextId},\n        });\n    }\n\n    /**\n     * Component descriptor for debugging.\n     *\n     * @return {string} Component name\n     */\n    static get componentName() {\n        return 'mod_bookit/resource_checklist/resource_checklist_container';\n    }\n\n    /**\n     * Get configuration object.\n     *\n     * @return {Object} Configuration\n     */\n    getConfig() {\n        return {\n            categoriesStateKey: 'categories',\n            itemsStateKey: 'checklistitems',\n            itemType: 'checklistitem',\n            categoryModalForm: 'mod_bookit\\\\form\\\\edit_category_form',\n            itemModalForm: 'mod_bookit\\\\form\\\\edit_resource_checklist_item_form',\n            selectors: {\n                addCategoryBtn: '#add-category-btn',\n                addItemBtn: '#add-checklist-item-btn',\n                tableView: '#resource-checklist-table-view',\n            }\n        };\n    }\n\n    /**\n     * Get category component class.\n     *\n     * @return {Class} Category component class\n     */\n    getCategoryComponent() {\n        return ResourceChecklistCategory;\n    }\n}\n"],"names":["BaseChecklistContainer","target","element","document","querySelector","contextId","parseInt","dataset","contextid","data","categoryRegion","itemRegion","itemFields","resourceid","duedate","el","itemDuedate","duedatetype","active","itemActive","categories","checklistitems","items","this","reactive","resourceChecklistReactiveInstance","selectors","componentName","getConfig","categoriesStateKey","itemsStateKey","itemType","categoryModalForm","itemModalForm","addCategoryBtn","addItemBtn","tableView","getCategoryComponent","ResourceChecklistCategory"],"mappings":";;;;;;;;0QAgC6BA,8CAObC,cACFC,QAAUC,SAASC,cAAcH,YAClCC,eACM,WAGLG,UAAYC,SAASJ,QAAQK,QAAQC,WAGrCC,MAAO,uCAAkBP,QAAS,CACpCQ,eAAgB,8BAChBC,WAAY,8BACZC,WAAY,CACRC,WAAY,iBACZC,QAAUC,IAAOA,GAAGR,QAAQS,YAAcV,SAASS,GAAGR,QAAQS,aAAe,KAC7EC,YAAa,kBACbC,OAASH,IAAiC,MAA1BA,GAAGR,QAAQY,mFAIL,CAC1BC,WAAYX,KAAKW,WACjBC,eAAgBZ,KAAKa,QAGlB,IAAIC,KAAK,CACZrB,QAASA,QACTsB,SAAUC,+DACVC,UAAW,CAACrB,UAAAA,aASTsB,iCACA,6DAQXC,kBACW,CACHC,mBAAoB,aACpBC,cAAe,iBACfC,SAAU,gBACVC,kBAAmB,uCACnBC,cAAe,sDACfP,UAAW,CACPQ,eAAgB,oBAChBC,WAAY,0BACZC,UAAW,mCAUvBC,8BACWC"}