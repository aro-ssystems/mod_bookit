{"version":3,"file":"drag_handle.min.js","sources":["../src/drag_handle.js"],"sourcesContent":["import {BaseComponent, DragDrop} from 'core/reactive';\nimport { masterChecklistReactiveInstance } from 'mod_bookit/master_checklist_reactive';\nimport { SELECTORS } from 'mod_bookit/master_checklist_reactive';\n\nexport default class extends BaseComponent {\n\n    static init(target, selectors) {\n        return new this({\n            element: document.querySelector(target),\n            reactive: masterChecklistReactiveInstance,\n            selectors: selectors || SELECTORS,\n        });\n    }\n\n    stateReady() {\n        this.relativeDrag = true;\n\n        // this.dragdrop = new DragDrop(this);\n\n        const dragType = this.element.dataset.bookitDragHandleType;\n        const dragId = this.element.dataset.bookitDragHandleId;\n\n        const itemSelector = `tr[data-bookit-drag-handle-${dragType}-id=\"${dragId}\"]`;\n        window.console.log('itemSelector: ', itemSelector);\n\n        const itemRow = document.querySelector(itemSelector);\n\n        window.console.log('DragDrop initialized for item: ', itemRow);\n\n        window.console.log(this.element)\n\n        this.fullregion = itemRow;\n\n        this.dragdrop = new DragDrop(this);\n    }\n\n    destroy() {\n        if (this.dragdrop !== undefined) {\n            this.dragdrop.unregister();\n        }\n    }\n\n    getDraggableData() {\n        return {\n            id: this.element.dataset.bookitDragHandleId,\n            type: this.element.dataset.bookitDragHandleType,\n            parentId: this.fullregion.dataset.bookitDragHandleParentId,\n        };\n    }\n\n    dragStart(dragData, event) {\n        // This method is called when the drag operation starts.\n        window.console.log('Drag started', dragData);\n    }\n\n    dragEnd(dragData, event) {\n        // This method is called when the drag operation ends.\n        window.console.log('Drag ended', dragData);\n    }\n\n    // validateDropData(dropdata) {\n\n    //     return true;\n    // }\n\n    // drop(dropdata, event) {\n    //     window.console.log('whoops you dropped this on a handle', dropdata);\n    // }\n}"],"names":["BaseComponent","target","selectors","this","element","document","querySelector","reactive","masterChecklistReactiveInstance","SELECTORS","stateReady","relativeDrag","dragType","dataset","bookitDragHandleType","dragId","bookitDragHandleId","itemSelector","window","console","log","itemRow","fullregion","dragdrop","DragDrop","destroy","undefined","unregister","getDraggableData","id","type","parentId","bookitDragHandleParentId","dragStart","dragData","event","dragEnd"],"mappings":"mQAI6BA,oCAEbC,OAAQC,kBACT,IAAIC,KAAK,CACZC,QAASC,SAASC,cAAcL,QAChCM,SAAUC,2DACVN,UAAWA,WAAaO,uCAIhCC,kBACSC,cAAe,QAIdC,SAAWT,KAAKC,QAAQS,QAAQC,qBAChCC,OAASZ,KAAKC,QAAQS,QAAQG,mBAE9BC,kDAA6CL,yBAAgBG,aACnEG,OAAOC,QAAQC,IAAI,iBAAkBH,oBAE/BI,QAAUhB,SAASC,cAAcW,cAEvCC,OAAOC,QAAQC,IAAI,kCAAmCC,SAEtDH,OAAOC,QAAQC,IAAIjB,KAAKC,cAEnBkB,WAAaD,aAEbE,SAAW,IAAIC,mBAASrB,MAGjCsB,eAC0BC,IAAlBvB,KAAKoB,eACAA,SAASI,aAItBC,yBACW,CACHC,GAAI1B,KAAKC,QAAQS,QAAQG,mBACzBc,KAAM3B,KAAKC,QAAQS,QAAQC,qBAC3BiB,SAAU5B,KAAKmB,WAAWT,QAAQmB,0BAI1CC,UAAUC,SAAUC,OAEhBjB,OAAOC,QAAQC,IAAI,eAAgBc,UAGvCE,QAAQF,SAAUC,OAEdjB,OAAOC,QAAQC,IAAI,aAAcc"}