{{!
    This file is part of Moodle - https://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <https://www.gnu.org/licenses/>.
}}
{{!
    @template mod_bookit/resource_checklist_catalog
    Resource checklist catalog template

    Context variables:
    * contextid - Context ID
    * categories - Array of categories with items
}}
<div id="mod-bookit-resource-checklist-container"
     class="mod-bookit-resource-checklist-container"
     data-contextid="{{contextid}}">

    <div class="mb-3">
        <a href="{{config.wwwroot}}/mod/bookit/admin/resources.php"
           class="btn btn-secondary">
            {{#pix}}t/left, core{{/pix}}
            {{#str}}resources:back_to_resources, mod_bookit{{/str}}
        </a>
    </div>

    <table class="table table-hover" id="resource-checklist-table-view">
        <thead>
            <tr>
                <th>{{#str}}name, core{{/str}}</th>
                <th style="width: 150px;">{{#str}}resources:duedate, mod_bookit{{/str}}</th>
                <th style="width: 100px;" class="text-center">{{#str}}status, core{{/str}}</th>
                <th style="width: 100px;" class="text-center">{{#str}}actions, core{{/str}}</th>
            </tr>
        </thead>
        {{#categories}}
        <tbody data-region="resource-checklist-category"
               data-categoryid="{{id}}"
               data-category-name="{{name}}"
               data-category-description="{{description}}"
               data-category-sortorder="{{sortorder}}">
            <tr class="table-active bg-light border-bottom" data-region="resource-checklist-category-row">
                <td colspan="4" class="font-weight-bold text-dark py-3">
                    <span data-field="category-name">{{{name}}}</span>
                </td>
            </tr>
            {{#items}}
            <tr class="resource-checklist-item-row {{^active}}opacity-50{{/active}}"
                data-region="resource-checklist-item-row"
                data-itemid="{{id}}"
                data-item-resourceid="{{resourceid}}"
                data-item-name="{{name}}"
                data-item-description="{{description}}"
                data-item-categoryid="{{categoryid}}"
                data-item-sortorder="{{sortorder}}"
                data-item-active="{{active}}"
                data-item-duedate="{{duedate}}"
                data-item-duedatetype="{{duedatetype}}">
                <td class="py-2">
                    <span data-field="item-name">{{{name}}}</span>
                    {{#description}}
                    <small class="text-muted d-block" data-field="item-description">{{{description}}}</small>
                    {{/description}}
                </td>
                <td class="py-2" data-field="item-duedate">
                    {{#duedate}}{{duedate}}{{/duedate}}
                    {{^duedate}}-{{/duedate}}
                </td>
                <td class="text-center py-2">
                    {{#active}}
                        <span class="badge badge-success">{{#str}}active, core{{/str}}</span>
                    {{/active}}
                    {{^active}}
                        <span class="badge badge-secondary">{{#str}}inactive, core{{/str}}</span>
                    {{/active}}
                </td>
                <td class="text-center py-2">
                    <button type="button"
                            id="edit-item-{{id}}"
                            class="btn btn-sm btn-light rounded-pill"
                            value="{{id}}"
                            data-action="edit-item">
                        {{#pix}}i/edit, core{{/pix}}
                    </button>
                </td>
            </tr>
            {{/items}}
        </tbody>
        {{/categories}}
    </table>
</div>
